{{<layouts/account-your-details}}
    {{$h1}}Your details{{/h1}}

    {{$column-1}}
        <ul class="page-nav">
            <li><a href="index.html">Update your details</a></li>
            <li><a href="apply-local-residents-discount">Apply for a local resident's discount</a></li>
            <li><a href="change-vehicle-details">Add or change your vehicle details</a></li>
            <li><a href="change-payment-details">Change your payment details</a></li>
            <li><a href="change-sign-in-password-pin">Change your sign-in email address, password and PIN</a></li>
            <li><a href="change-close-account">Change account type or close your account</a></li>
        </ul>
    {{/column-1}}

    {{$column-2}}
        <h2 class="heading-24" id="section6">Change your payment details</h2>
        <p>Payment method: manual top-up</p>

        <p class="action group">
        <input type="submit" name="submitdetails" id="submitdetails" value="Save new payment details" class="button"></p>
    {{/column-2}}

    {{$js-functions}}
        clearDirectDebit = function() {
            setDisplay(el.sectionDirectDebit, false);
        },
        showAutomatic = function() {
            el.checkTerms.checked = false;
            setDisplay(el.sectionTopUp, true);
            setDisplay(el.sectionTopUpAutomatic, true);
            setDisplay(el.sectionTopUpManual, false);
        },
        showDirectDebit = function() {
            setDisplay(el.sectionDirectDebit, true);
        },
        showManual = function() {
            el.checkTerms.checked = false;
            el.radioPaymentDirectDebit.checked = false;
            setDisplay(el.sectionTopUp, true);
            setDisplay(el.sectionTopUpAutomatic, false);
            setDisplay(el.sectionTopUpManual, true);
        },
        testForm = function() {
            setDisabled(el.buttonNext, false);
        }
    {{/js-functions}}

    {{$js-initialisation}}
        init = function() {
            if (window.location.search.match(/=debug/)) {
                el.body.classList.add('debug');
            }
            el.buttonNext.addEventListener('click', function(e) {
                e.preventDefault();
                if ($('#payment-direct-debit:checked')) {
                    window.location = 'payment/direct-debit';
                } else {
                    window.location = 'payment/card';
                }
            });
            el.checkTerms.addEventListener('click', function(elem) {
                testForm();
            }, false);
            el.radioPaymentDirectDebit.addEventListener('click', function() {
                showDirectDebit();
            }, false);
            el.radioPaymentCard.addEventListener('click', function() {
                clearDirectDebit();
            }, false);
            el.radioTopUpAutomatic.addEventListener('click', function() {
                showAutomatic();
            }, false);
            el.radioTopUpManual.addEventListener('click', function() {
                showManual();
            }, false);
        }
    {{/js-initialisation}}

    {{$js-objects}}
        el = {
            body: $('body'),
            buttonNext: $('#next'),
            checkTerms: $('#terms'),
            radioPaymentCard: $('#payment-card'),
            radioPaymentDirectDebit: $('#payment-direct-debit'),
            radioTopUpAutomatic: $('#top-up-automatic'),
            radioTopUpManual: $('#top-up-manual'),
            sectionDirectDebit: $('#direct-debit'),
            sectionTopUp: $('#top-up-types'),
            sectionTopUpAutomatic: $('#type-automatic'),
            sectionTopUpAll: $$('.top-up > div'),
            sectionTopUpManual: $('#type-manual')
        }
    {{/js-objects}}

{{/layouts/account-your-details}}
